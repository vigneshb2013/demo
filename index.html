<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Show Public & Help Get Private IP (with consent)</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:20px;background:#f7fafc;color:#111}
    .card{background:#fff;border-radius:10px;padding:20px;max-width:820px;margin:12px auto;box-shadow:0 6px 20px rgba(10,20,40,0.06)}
    h1{margin:0 0 8px;font-size:20px}
    p.lead{color:#444;margin:6px 0 14px}
    pre, code{background:#f1f5f9;padding:8px;border-radius:6px;overflow:auto}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    button{padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
    input[type="text"], textarea{width:100%;padding:8px;border-radius:6px;border:1px solid #e2e8f0}
    label.small{font-size:13px;color:#555}
    .muted{color:#6b7280;font-size:13px}
    .ok{color:green}
  </style>
</head>
<body>
  <div class="card">
    <h1>Public IP & Private IP helper (explicit consent)</h1>
    <p class="lead">This page shows your <strong>public IP</strong> automatically. To share your <strong>private/local IP</strong> (e.g., 192.168.x.x) you must either run a short command on your device or paste it below — and you must check the consent box to send it.</p>

    <h3>1) Your public IP (what websites see)</h3>
    <p id="pubip" class="muted">Detecting public IP…</p>

    <h3>2) If you want to find your private/local IP (choose your OS)</h3>
    <div class="row">
      <div style="flex:1;min-width:240px">
        <strong>Windows (PowerShell)</strong>
        <pre id="wincmd">ipconfig</pre>
        <div class="muted">Open PowerShell or Command Prompt and run the command above. Look for "IPv4 Address" under Wi‑Fi or Ethernet.</div>
        <button onclick="copyText('#wincmd')">Copy command</button>
      </div>

      <div style="flex:1;min-width:240px">
        <strong>macOS</strong>
        <pre id="maccmd">ipconfig getifaddr en0  # or: ifconfig | grep 'inet '</pre>
        <div class="muted">Open Terminal and run. On many Macs en0 is Wi‑Fi; if empty try en1 or use ifconfig.</div>
        <button onclick="copyText('#maccmd')">Copy command</button>
      </div>

      <div style="flex:1;min-width:240px">
        <strong>Linux</strong>
        <pre id="lnxcmd">ip -4 addr show scope global | grep -oP '(?&lt;=inet\s)\d+(\.\d+){3}' | head -n1</pre>
        <div class="muted">Open Terminal and run. This prints the first global IPv4 address.</div>
        <button onclick="copyText('#lnxcmd')">Copy command</button>
      </div>
    </div>

    <h3>3) Paste your private IP here (optional — only if you consent)</h3>
    <label class="small"><input type="checkbox" id="consent"> I consent to send my private IP to the page owner</label>
    <p class="muted">If you check consent, clicking "Submit private IP" will send the value below to the owner. Do not share if you are not comfortable.</p>
    <textarea id="privateIp" placeholder="Paste private IP here (e.g. 192.168.1.5)"></textarea>
    <div style="margin-top:8px">
      <button id="sendPrivate">Submit private IP (with consent)</button>
    </div>

    <h3>4) Optional: send public IP to owner as well</h3>
    <label class="small"><input type="checkbox" id="sendPub" checked> Send my public IP to the page owner</label>
    <div style="margin-top:8px">
      <button id="sendPubBtn">Send public IP now</button>
      <span id="status" class="muted" style="margin-left:12px"></span>
    </div>

    <hr>
    <p class="muted">Privacy note: nothing is submitted unless you explicitly check consent and click a submit button. Replace LOG_ENDPOINT below with the owner's webhook if you want automatic delivery. Use this only with explicit permission.</p>
  </div>

<script>
  // Replace with your webhook URL if you want the page to post (owner must set)
  const LOG_ENDPOINT = 'https://webhook.site/fc9675a5-3d1c-48d6-8a59-7eb4cea4f30d';

  // Utility to copy commands
  function copyText(selector){
    const txt = document.querySelector(selector).innerText;
    navigator.clipboard?.writeText(txt).then(()=>alert('Command copied to clipboard'));
  }

  // Show public IP on load
  async function showPublicIP(){
    const el = document.getElementById('pubip');
    try{
      const r = await fetch('https://api.ipify.org?format=json', {cache:'no-store'});
      const j = await r.json();
      el.textContent = j.ip || 'Unknown';
    }catch(e){
      el.textContent = 'Could not detect public IP';
    }
  }
  showPublicIP();

  // POST helper
  async function postToWebhook(payload){
    if(!LOG_ENDPOINT || LOG_ENDPOINT.includes('YOUR_WEBHOOK')) return;
    try{
      await fetch(LOG_ENDPOINT, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload),
        cache:'no-store'
      });
      return true;
    }catch(e){
      console.error('post error', e);
      return false;
    }
  }

  // Send public IP
  document.getElementById('sendPubBtn').addEventListener('click', async ()=>{
    const status = document.getElementById('status');
    status.textContent = 'Sending…';
    let ipText = document.getElementById('pubip').textContent || '';
    const ok = await postToWebhook({ type:'public_ip', ip:ipText, time: new Date().toISOString() });
    status.textContent = ok ? 'Sent' : 'Failed to send';
    if(ok) document.getElementById('status').classList.add('ok');
  });

  // Send private IP (only with consent)
  document.getElementById('sendPrivate').addEventListener('click', async ()=>{
    const consent = document.getElementById('consent').checked;
    const val = document.getElementById('privateIp').value.trim();
    if(!consent){
      alert('You must check the consent box to share a private IP.');
      return;
    }
    if(!val){
      alert('Please paste your private IP (e.g., 192.168.1.5) before submitting.');
      return;
    }
    const ok = await postToWebhook({ type:'private_ip', ip: val, time: new Date().toISOString() });
    if(ok) alert('Private IP submitted successfully.');
    else alert('Failed to submit. Check console or network.');
  });
</script>
</body>
</html>
